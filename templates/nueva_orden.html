{% extends 'base.html' %}
{% block contenido %}
<div class="container py-4">
  <h2 class="text-center mb-4">ğŸ§ª Nueva Orden de Trabajo</h2>

  <form method="POST">

    <!-- Mostrar productor, campo y lote -->
    <div class="mb-3">
      <label class="form-label">ğŸ‘¤ Productor:</label>
      <div class="form-control-plaintext fw-bold">{{ productor_nombre }}</div>
      <input type="hidden" name="productor_id" value="{{ productor_id }}">
    </div>

    <div class="mb-3">
      <label class="form-label">ğŸŒ¾ Campo:</label>
      <div class="form-control-plaintext fw-bold">{{ campo_nombre }}</div>
      <input type="hidden" name="campo_id" value="{{ campo_id }}">
    </div>

    <div class="mb-3">
      <label class="form-label">ğŸ“ Lote:</label>
      <div class="form-control-plaintext fw-bold">{{ lote_nombre }}</div>
      <input type="hidden" name="lote_id" value="{{ lote_id }}">
    </div>

    <!-- Datos de la orden -->
    <div class="mb-3">
      <label class="form-label">ğŸ“… Fecha estimada de trabajo:</label>
      <input type="date" name="fecha" class="form-control" required>
    </div>

    <div class="mb-3">
      <label class="form-label">ğŸ“ HectÃ¡reas estimadas:</label>
      <input type="number" step="0.01" name="hectareas" class="form-control" required>
    </div>

    <h4 class="mt-4">ğŸŒ¦ï¸ Condiciones de aplicaciÃ³n</h4>

<div class="mb-3">
  <label class="form-label">ğŸšœ MÃ¡quina:</label>
  <input type="text" name="maquina" class="form-control">
</div>

<div class="mb-3">
  <label class="form-label">ğŸ’§ Pastilla:</label>
  <input type="text" name="pastilla" class="form-control">
</div>

<div class="mb-3">
  <label class="form-label">ğŸ’¦ Humedad relativa mÃ­nima (%):</label>
  <input type="number" step="1" name="humedad_minima" class="form-control">
</div>

<div class="mb-3">
  <label class="form-label">ğŸŒ¡ï¸ Temperatura mÃ¡xima (Â°C):</label>
  <input type="number" step="0.1" name="temperatura_maxima" class="form-control">
</div>

<div class="mb-3">
  <label class="form-label">ğŸŒ¬ï¸ Velocidad de viento mÃ¡xima (km/h):</label>
  <input type="number" step="0.1" name="viento_maximo" class="form-control">
</div>

<div class="mb-3">
  <label class="form-label">ğŸ§­ DirecciÃ³n del viento:</label>
  <input type="text" name="direccion_viento" class="form-control">
</div>

<div class="mb-3">
  <label class="form-label">â³ Carencia (dÃ­as):</label>
  <input type="number" step="1" name="carencia" class="form-control">
</div>

<div class="mb-3">
  <label class="form-label">ğŸ§ª Tasa de aplicaciÃ³n:</label>
  <input type="text" name="tasa_aplicacion" class="form-control">
</div>

<div class="mb-3">
  <label class="form-label">ğŸ“ Observaciones tÃ©cnicas:</label>
  <textarea name="observaciones" class="form-control" rows="3"></textarea>
</div>

<div class="mb-3">
  <label class="form-label">ğŸ‘· Contratista:</label>
  <input type="text" name="contratista" class="form-control">
</div>


    <!-- Productos aplicados -->
    <h4 class="mt-4">ğŸ§ª Productos aplicados</h4>
    <div id="productos" class="mb-3">
      <div class="row g-2 producto-item">
        <div class="col-5">
          <input type="text" name="producto[]" class="form-control" placeholder="Producto">
        </div>
        <div class="col-3">
          <select name="unidad[]" class="form-select">
            <option value="litros">Litros</option>
            <option value="gramos">Gramos</option>
          </select>
        </div>
        <div class="col-4">
          <input type="number" step="0.01" name="cantidad[]" class="form-control" placeholder="Cantidad/ha">
        </div>
      </div>
    </div>

    <button type="button" onclick="agregarProducto()" class="btn btn-outline-success mb-3">â• Agregar producto</button>
    <button type="submit" class="btn btn-primary w-100">ğŸ’¾ Guardar orden</button>
  </form>
</div>

<script>
function agregarProducto() {
  const div = document.createElement('div');
  div.className = 'row g-2 producto-item mt-2';
  div.innerHTML = `
    <div class="col-5">
      <input type="text" name="producto[]" class="form-control" placeholder="Producto">
    </div>
    <div class="col-3">
      <select name="unidad[]" class="form-select">
        <option value="litros">Litros</option>
        <option value="gramos">Gramos</option>
      </select>
    </div>
    <div class="col-4">
      <input type="number" step="0.01" name="cantidad[]" class="form-control" placeholder="Cantidad/ha">
    </div>
  `;
  document.getElementById('productos').appendChild(div);
}
</script>
{% endblock %}
